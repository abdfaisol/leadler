{"title":"user","type":"cms-template","lang":"","status":"SYSTEM","parent_id":"54643","content":{"type":"API","structure":"","server_on_load":"async ({\n  template,\n  params,\n  render,\n  db,\n  req,\n  reply,\n  user,\n  log,\n  ext,\n  isDev,\n}: Server) => {\n  const privateKey = \"Team 6 Andromedia\";\n  let a_data = ext.CryptoJS.AES.decrypt(req.session.id, privateKey).toString(\n    ext.CryptoJS.enc.Utf8\n  );\n  let data_split = a_data.split(\";\");\n  let data = {\n    id: data_split[0],\n    username: data_split[1],\n    email: data_split[2],\n  };\n  db.muser\n    .findUnique({\n      where: {\n        id: parseInt(data.id),\n      },\n      select: {\n        username: true,\n        muser_role: {\n          select: {\n            name: true,\n          },\n        },\n      },\n    })\n    .then((e) => {\n      reply.send({\n        data_act: e,\n      });\n    })\n}","figma":{}},"slug":"/api/user","site":"*","id":"14456"}