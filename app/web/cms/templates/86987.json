{"content":{"type":"API","structure":"","server_on_load":"async ({\n  template,\n  params,\n  render,\n  db,\n  req,\n  reply,\n  user,\n  log,\n  ext,\n  isDev,\n}: Server) => {\n  let data_input = {\n    email: req.body.email,\n    token: \"false\",\n  };\n  const getToken = db.$queryRaw(\n    \"SELECT f_tokenforgetpassword('\" + req.body.email + \"')\"\n  );\n  getToken.then((e) => {\n    if (e[0].f_tokenforgetpassword != \"false\") {\n      let data_email = {\n        to_email: data_input.email,\n        to_name: \"My Beloved User\",\n        from_name: \"abdullah\",\n        subject_email: \"Reset Password\",\n        url_token: window.location.href + e[0].f_tokenforgetpassword,\n        url_label: window.location.href + e[0].f_tokenforgetpassword,\n      };\n      ext.emailjs\n        .send(\n          \"service_xymj3ni\",\n          \"template_cb742fj\",\n          data_email,\n          \"user_v0OmmDyr2jl4Wps2AwmWZ\"\n        )\n        .then(\n          function (response) {\n            reply.send({\n              status: \"true\",\n              result: response.text,\n              // status: response,\n            });\n          },\n          function (error) {\n            reply.send({\n              status: \"false\",\n              result: error.text,\n            });\n          }\n        );\n    } else {\n      reply.send({\n        status: \"false\",\n        result: \"email not found or already max 2 email per day\",\n      });\n    }\n  });\n\n  // var msg = \"Pesan Tidak Tersedia\"\n}","figma":{}},"title":"email-reset","type":"cms-template","lang":"","status":"SYSTEM","parent_id":"24374","slug":"/api/email-reset","site":"*","id":"86987"}