{"content":{"type":"API","structure":"","server_on_load":"async ({\n  template,\n  params,\n  render,\n  db,\n  req,\n  reply,\n  user,\n  log,\n  ext,\n  isDev,\n}: Server) => {\n  const privateKey = \"Team 6 Andromedia\";\n  let a_post = {\n    email: req.body.email,\n    pass: req.body.password,\n  };\n  let a_pass = a_post.pass;\n  const dataLogin = db.muser.findUnique({\n    where: {\n      email: a_post.email,\n    },\n  });\n  dataLogin.then((e) => {\n    let password = ext.CryptoJS.AES.decrypt(e.password, privateKey).toString(\n      ext.CryptoJS.enc.Utf8\n    );\n    let status = false;\n    let in_data = {};\n    if (password == a_pass) {\n      status = true;\n      in_data = e.id + \";\" + e.username + \";\" + e.email;\n      in_data = ext.CryptoJS.AES.encrypt(in_data, privateKey).toString();\n      req.session.id = in_data;\n    }\n    reply.send({\n      status: status,\n      data: in_data,\n      data_masuk: a_post,\n    });\n  })\n}","figma":{}},"title":"login","type":"cms-template","lang":"","status":"SYSTEM","parent_id":"54643","slug":"/api/login","site":"*","id":"46513"}